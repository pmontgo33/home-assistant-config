#################################################################
## Sensors
#################################################################

#  - platform: yr
#  - platform: pi_hole
 
  - platform: template
    sensors:
    
      house_mode:
        friendly_name: House Mode
        value_template: >
          {% if is_state('input_boolean.away_mode', 'on') %}
            Away
          {% elif is_state('input_boolean.sleep_mode', 'on') %}
            Sleep
          {% else %}
            Home
          {% endif %}  
        icon_template: >
          {% if is_state('input_boolean.away_mode', 'on') %}
            mdi:home-outline
          {% elif is_state('input_boolean.sleep_mode', 'on') %}
            mdi:sleep
          {% else %}
            mdi:home-account
          {% endif %}  
          

      
      upstairs_op_mode:
        value_template: '{{ states.climate.upstairs.attributes.operation_mode|title }}'
      downstairs_op_mode:
        value_template: '{{ states.climate.downstairs_heating_1.attributes.operation_mode|title }}'
  
  - platform: mqtt
    name: "Smoke Detector"
    state_topic: "home/safety/smoke_detector"
    retain: true
  
  ### WEATHER UNDERGROUND ###
  - platform: wunderground
    api_key: !secret wunderground_api_key
    monitored_conditions:
      - alerts
      - temp_f
      - feelslike_f
      - relative_humidity
      - precip_today_in
      - weather
      - wind_mph
      - precip_1d_in
      - precip_1d

  
  ### GOOGLE TRAVEL TIMES ###
  
  - platform: google_travel_time
    name: Pat to Home
    api_key: AIzaSyCNRZv1UvQO6PH7ZoXQCZy6qluDz9EwC4E
    origin: device_tracker.pat_phone
    destination: zone.home
  
  - platform: google_travel_time
    name: Lina to Home
    api_key: AIzaSyCNRZv1UvQO6PH7ZoXQCZy6qluDz9EwC4E
    origin: device_tracker.lina_phone
    destination: zone.home
  
  - platform: google_travel_time
    name: Home To Staten Island
    api_key: AIzaSyCNRZv1UvQO6PH7ZoXQCZy6qluDz9EwC4E
    origin: zone.home
    destination: zone.staten_island
    
  - platform: google_travel_time
    name: Home To City
    api_key: AIzaSyCNRZv1UvQO6PH7ZoXQCZy6qluDz9EwC4E
    origin: zone.home
    destination: 39.952501, -75.158069
    options:
      mode: transit

  - platform: speedtest
    monitored_conditions:
      - ping
      - download
      - upload


      # upstairs_away_mode:
      #   entity_id: climate.upstairs
      #   friendly_name: Upstairs Away
      #   value_template: >
      #     {{ is_state_attr('climate.upstairs', 'operation_mode', 'eco') }}
  
      # upstairs_away_mode_test:
      #   entity_id: climate.upstairs
      #   friendly_name: Upstairs Away Test
      #   value_template: >
      #     {{ states.climate.upstairs.attributes.away_mode }}
     
      # away_mode:
      #   friendly_name: Away Mode
      #   value_template: >
      #     {% if is_state('input_boolean.away_mode', 'on') %}
      #       Away
      #     {% else %}
      #       Home
      #     {% endif %}        
      
      # dstairs_home_set_point:
      #   friendly_name: Downstairs Home Set Point
      #   value_template: >
      #     {% if is_state_attr('climate.downstairs_heating_1', 'operation_mode', 'Heat') %}
      #       {% if is_state('input_boolean.sleep_mode', 'off') %}
      #         {{ float(74) }}
      #       {% else %}
      #         {{ float(64) }}
      #       {% endif %}
      #     {% elif is_state_attr('climate.downstairs_cooling_1', 'operation_mode', 'Cool') %}
      #       {% if is_state('input_boolean.sleep_mode', 'off') %}
      #         {{ float(80) }}
      #       {% else %}
      #         {{ float(86) }}
      #       {% endif %}
      #     {% endif %}
      
      # dstairs_away_set_point:
      #   friendly_name: Downstairs Away Set Point
      #   value_template: >
      #     {% if is_state_attr('climate.downstairs_heating_1', 'operation_mode', 'Heat') %}
      #       {{ float(64) }}
      #     {% elif is_state_attr('climate.downstairs_heating_1', 'operation_mode', 'Cool') %}
      #       {{ float(86) }}
      #     {% endif %}